---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "bastion_group_server Resource - bastion"
subcategory: ""
description: |-
  Manages a Bastion group access.Some features like proxyjump accesses and port forwardings are only support when running The Bastion fork https://github.com/adfinis-forks/the-bastion from Adfinis.
---

# bastion_group_server (Resource)

Manages a Bastion group access.  
Some features like proxyjump accesses and port forwardings are only support when running [The Bastion fork](https://github.com/adfinis-forks/the-bastion) from Adfinis.

## Example Usage

```terraform
# basic example
resource "bastion_group_server" "example" {
  group = "kryptonians"
  ip    = "192.168.1.100"
  port  = "22"
  user  = "kal-el"
}

# example with an ssh proxyjump
resource "bastion_group_server" "example_proxy" {
  group      = "kryptonians"
  ip         = "192.168.1.100"
  port       = "22"
  user       = "kal-el"
  proxy_ip   = "10.10.10.10"
  proxy_port = "22"
  proxy_user = "jor-el"
}

# example with protocol access.
# in order to create a protocol access, a base server access must first exist.
resource "bastion_group_server" "example_base" {
  group = "kryptonians"
  ip    = "192.168.1.200"
  port  = "22"
  user  = "kara-zor-el"
}

resource "bastion_group_server" "example_sftp" {
  group      = "kryptonians"
  ip         = "192.168.1.200"
  port       = "22"
  protocol   = "sftp"
  depends_on = [bastion_group_server.example_base]
}

resource "bastion_group_server" "example_scpupload" {
  group      = "kryptonians"
  ip         = "192.168.1.200"
  port       = "22"
  protocol   = "scpupload"
  depends_on = [bastion_group_server.example_base]
}

resource "bastion_group_server" "example_rsync" {
  group      = "kryptonians"
  ip         = "192.168.1.200"
  port       = "22"
  protocol   = "rsync"
  depends_on = [bastion_group_server.example_base]
}

resource "bastion_group_server" "example_portforward" {
  group       = "kryptonians"
  ip          = "192.168.1.200"
  port        = "22"
  protocol    = "portforward"
  remote_port = 8080
  depends_on  = [bastion_group_server.example_base]
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `group` (String) The Bastion group name to add the access to
- `ip` (String) IP or subnet of the access target. (hostname does not work)
- `port` (String) Port of the access target, use '*' to allow ssh access to all ports

### Optional

> **NOTE**: [Write-only arguments](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments) are supported in Terraform 1.11 and later.

- `comment` (String) Comment for the access
- `force` (Boolean, [Write-only](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments)) Force adding the access even if it cannot be verified
- `force_key` (String) Force a specific SSH key for the access
- `force_password` (String) Force a specific password for the access
- `protocol` (String) Protocol to grant access for. Valid values are 'sftp', 'scpupload', 'scpdownload', 'rsync', 'portforward'. When set, 'user' must be empty. A base access must already exist for the server.
- `proxy_ip` (String) IP of the proxy server
- `proxy_port` (String) Port of the proxy server
- `proxy_user` (String) Username for the proxy server, use '*' to allow all users
- `remote_port` (Number) Remote port forwarded from the target server to The Bastion
- `ttl` (Number) Time to live in seconds for the access
- `user` (String) Username for the access, use '*' to allow ssh access for all users.

### Read-Only

- `id` (String) The resource identifier

## Import

Import is supported using the following syntax:

The [`terraform import` command](https://developer.hashicorp.com/terraform/cli/commands/import) can be used, for example:

```shell
# Expected formats:
# - group:ip:port:user
# - group:ip:port:user:protocol
# - group:ip:port:user:protocol:remote_port (when protocol is "portforward")
# - group:ip:port:user:proxy_ip:proxy_port:proxy_user
# - group:ip:port:user:protocol:proxy_ip:proxy_port:proxy_user
# - group:ip:port:user:protocol:remote_port:proxy_ip:proxy_port:proxy_user (when protocol is "portforward")

terraform import bastion_group_server.example 'kryptonians:192.168.1.100:22:kal-el'

terraform import bastion_group_server.example2 'kryptonians:10.0.0.0/24:*:*'

terraform import bastion_group_server.example3 'kryptonians:[2001:db8::1]:22:kal-el'

terraform import bastion_group_server.example4 'kryptonians:172.16.0.50:22:kal-el:10.0.0.1:22:jor-el'

terraform import bastion_group_server.example5 'kryptonians:[2001:db8::1]:22:kal-el:[fd00::1]:22:jor-el'

terraform import bastion_group_server.example6 'kryptonians:192.168.1.200:22::sftp'

terraform import bastion_group_server.example7 'kryptonians:10.0.0.50:22::rsync:192.168.1.1:22:jor-el'

terraform import bastion_group_server.example8 'kryptonians:192.168.1.100:22::portforward:8080'

terraform import bastion_group_server.example9 'kryptonians:10.0.0.50:22::portforward:3306:192.168.1.1:22:jor-el'
```
